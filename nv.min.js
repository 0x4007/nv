function nv(e,n){"use strict";var t=[function(e,n){return e&&"object"!=typeof e&&(e=!1,console.error("Settings is to be an object.")),n&&"function"!=typeof n&&(n=!1,console.error("Callback is to be a function.")),"function"==typeof window.nv?nv={arrays:{},booleans:{respawn:!1},events:{},functions:{scanUI:function(e,n){for(n(e),e=e.firstChild;e;)this.scanUI(e,n),e=e.nextSibling},buildUI:function(){var e=document.createDocumentFragment(),n=document.createElement("LI"),t=document.createElement("A");return nv.spreads.each(function(s){var r=s.el,i=r.id,o=n.cloneNode(!1),a=t.cloneNode(!1);i||(i=r.tagName||r.className),a.href="#".concat(i),a.textContent=i,o.appendChild(a),e.appendChild(o)}),nv.booleans.respawn&&(nv.selectors.navigation.innerHTML=""),nv.selectors.navigation.appendChild(e),nv},get:function(e,n,t,s,r){var i=function(e){return-1!=e.indexOf(".js")?"SCRIPT":-1!=e.indexOf(".css")?"STYLE":!1};if(void 0==s&&(s=function(){throw new URIError("Failed to fetch from URL.")}),void 0==n&&"string"==typeof e&&(n=function(n){var t=document.createElement(i(e)),s=n.responseURL.split("/");s=s[s.length-1],t.setAttribute("data-source",s),t.textContent=n.responseText.concat(["\n//# sourceURL=",n.responseURL].join("")),document.body.appendChild(t)}),Array.isArray(e)){var o=e.reverse(),a=o.length;for(r=n;a--;){if(-1!=o[a].indexOf(".js")?(n=function(e){var n=document.createElement("SCRIPT"),t=e.responseURL.split("/");t=t[t.length-1],n.setAttribute("data-source",t),n.textContent=e.responseText.concat(["\n//# sourceURL=",e.responseURL].join("")),document.body.appendChild(n)},void 0==s&&(s=function(){})):-1!=o[a].indexOf(".css")&&(n=function(e){var n=document.createElement("STYLE"),t=e.responseURL.split("/");t=t[t.length-1],n.setAttribute("data-source",t),n.textContent=e.responseText.concat(["\n//# sourceURL=",e.responseURL].join("")),document.body.appendChild(n)},void 0==s&&(s=function(){})),!a){var c=n;return nv.functions.get(o[a],function(e){c(e),"function"==typeof r&&r(e)},t,s)}nv.functions.get(o[a],n,t,s,r)}return!0}var d=new XMLHttpRequest;d.data=t,void 0===d.responseURL&&(d.responseURL=-1===e.indexOf("//")?window.location.href.concat(e):e),d.open("GET",e),d.onloadend=function(){if(200==d.status)n(d);else if(d.status>=500&&d.status<600){if(console.warn("Server error, retrying request."),nv.numbers.backoff||(nv.numbers.backoff=.5),nv.numbers.backoff<30)return setTimeout(function(){nv.functions.get(d.responseURL,n,t,s,r)},1e3*(Math.random()+(nv.numbers.backoff+=nv.numbers.backoff)));s(d)}else s(d)},d.send()}},numbers:{},objects:{},selectors:{},spreads:{injected:[],models:[],cache:[]},strings:{},subroutine:t,writable:!0}:"object"==typeof window.nv&&(nv.booleans.respawn=!0,nv=window.nv),n&&(nv.functions.callback=n),t[1](e)},function(e){if(e)for(var n in e)if("spreads"!==n)for(var s in e[n])e[n].hasOwnProperty(s)&&(nv[n][s]=e[n][s]);else if("string"==typeof e[n])nv[n].injected.push(e[n]);else if(Array.isArray(e[n]))for(var r=e[n].length;r--;)nv[n].injected.push(e[n][r]);var i=nv.selectors;if(i.ui||(i.ui=document.getElementById("UI")||document.getElementsByClassName("UI")[0]||document.getElementsByTagName("UI")[0]||!1),i.ui&&(i.ui.id||(i.ui.id="UI"),i.navigation||(i.navigation=document.getElementById("Navigation")||i.ui.getElementsByClassName("Navigation")[0]||i.ui.getElementsByTagName("ol")[0]||i.ui.getElementsByTagName("ul")[0]||i.ui.getElementsByTagName("nav")[0]||!1),i.navigation&&!i.navigation.id&&(i.navigation.id="Navigation")),i.spreads=document.getElementById("Spreads")||!1,i.spreads)return i.spreads.id||(i.spreads.id="Spreads"),nv.spreads.injected.length?t[2](nv.spreads.injected):t[3]();if(nv.spreads.injected.length){var o=document.createElement("MAIN");return o.id="Spreads",i.spreads=o,document.body.appendChild(o),t[2](nv.spreads.injected)}return t[4]()},function(e){if(!e||void 0==e)return console.log("Spread inject queue completed."),nv.spreads.cache&&(nv.spreads.injected=nv.spreads.cache.reverse()),t[3]();if(Array.isArray(e))return e.length?t[2](nv.spreads.injected.pop()):t[3]();if("string"!=typeof e){nv.spreads.injected=[],nv.spreads.scripts={codes:[],urls:[]};for(var n=nv.spreads.cache,s=[],r=n.length;r--;)nv.spreads.each(function(e){-1!==n[r].slice(n[r].lastIndexOf("/")+1).toLowerCase().indexOf(e.el.id.toLowerCase())&&s.push(n.splice(r,1))});return s.length&&console.error(['❌ Conflicts rejected: "',s,'"'].join("")),t[2](nv.spreads.cache.pop())}var i=!0;-1!=e.lastIndexOf(".")&&e.lastIndexOf(".")>e.lastIndexOf("/")&&e.lastIndexOf("..")<=e.lastIndexOf("/")&&(i=!1),i&&"/"!=e.slice(-1)&&(e=e.concat("/")),nv.functions.get(e,function(n){if(-1!=n.responseURL.indexOf(".htm")||-1!=n.responseURL.indexOf(".php"))nv.spreads.cache.push(e),t[2](nv.spreads.injected.pop());else{if(-1!=n.response.toUpperCase().indexOf("<!DOCTYPE HTML")){var s=n.response.match(/a href=\".+?\"/gi),r=[];if(null!=s)var i=0;else console.warn("Failed to scrape hrefs from target document.");for(;s.length-1>i++;)"?"!=s[i].charAt(8)&&r.push(s[i].replace('a href="',"").slice(0,-1))}else try{var r=JSON.parse(n.response)}catch(o){return console.log("Invalid response from nv.functions.spreads(*) target",o,n.response),t[2](nv.spreads.injected.pop())}for(var i=-1;r.length-1>i++;){if(Array.isArray(r[i])){for(var a=0,c=a;r[i].length-1>a++;)r.unshift(r[i][a]);r.splice(i-=c,1)}!r[i].match(/.+(?=(\.html?$|\.php$)).+/i)||"."!=r[i].charAt(1)&&"."==r[i].charAt(0)||"index.php"==r[i]?console.log(['❌ "',r[i],'"'].join("")):(nv.spreads.cache.push(e.concat(r[i])),console.log(['✅ "',r[i],'"'].join("")))}t[2](nv.spreads.injected.pop())}},null,function(e){console.error("XHR failure.",e),t[2](nv.spreads.injected.pop())})},function(){if(nv.selectors.spreads){var e=function(e,n){if(this.models=[],this.cache=[],n){this.scripts={urls:[],codes:[]},this.injected=[];for(var t=n.injected.length,s=document.createElement("SECTION");t--;){var r=s.cloneNode(!1);if("string"==typeof n.injected[t]){var i=n.injected[t].split("/");r.setAttribute("data-injected",n.injected[t]),r.innerHTML=['<article><ins>Inserting "',n.injected[t],'" now.</ins></article>'].join(""),i=i[i.length-1].split(".")[0],r.id=i.charAt(0).toUpperCase().concat(i.slice(1)),nv.selectors.spreads.appendChild(r),this.injected.push(r)}else console.error(n.injected[t],"You passed in something unexpected for the injected spread. Please pass in a URL.")}}return this.register(e),this};e.prototype={register:function(e){var t=this.models,s=0,r=e.length;for("number"!=typeof r&&(e=[e]);r>s;)t.push(new n(e[--r]));return this},each:function(e){for(var n=this,t=n.models,s=t.length;s--;)e(t[s]);return n},wrapAll:function(){return this.each(function(e){e.wrap()}),this},hero:function(){return this.models[this.models.length-1]},measure:function(){var e=this;return e.each(function(n){var t=n.el.getBoundingClientRect().top;t<window.innerHeight/2&&(e.active=n)}),e.each(function(n){n==e.active?n.addClass("Active"):n.removeClass("Active")}),e}};var n=function(e){return this.el=e,this};if(n.prototype={wrap:function(){var e=this,n=e.el;n.innerHTML;return n.children[0]&&(""!=n.children[0].getAttribute("onclick")&&"ARTICLE"!=n.children[0].tagName?n.innerHTML=["<article onclick>",n.innerHTML.replace(/\n\s+/g,""),"</article>"].join(""):nv.booleans.respawn=!0),e},addClass:function(e){var n=this.el,t=n.className.split(" ");return""===t[0]&&t.shift(),-1===t.indexOf(e)&&(t.push(e),n.className=t.join(" ")),this},removeClass:function(e){var n=this.el,t=n.className.split(" "),s=t.indexOf(e);return-1!==s&&(t.splice(s,1),n.className=t.join(" ")),this}},nv.spreads=new e(nv.selectors.spreads.children,nv.spreads),void 0!=nv.spreads.injected&&nv.spreads.injected.length){var s=nv.spreads.injected.slice(0);nv.spreads.injected.length;nv.functions.get(s[0].getAttribute("data-injected"),function r(e){var n=e.response;if(-1!=n.indexOf("<script")){for(var i=n.match(/<script(.|\n)+?<\/script>/gi),o=[],a=[],c=i.length,d=/src=\".+?\"/gi;c--;)o.push(i[c].match(d));c=o.length;for(var l=c-1,v=/['"]+/g;c--;)if(o[c])for(var u=o[c].length;u--;)o[c][u]&&(o[c][u]=o[c][u].replace("src=",""),nv.spreads.scripts.urls.push(o[c][u].replace(v,"")));else a.push(l-c);c=a.length;for(var p=/<scrip.+?>/,f=/<\/scrip.+?>/;c--;)n=i[a[c]].replace(p,""),n=n.replace(f,""),n.length&&nv.spreads.scripts.codes.push(n)}var n=e.response.replace(/\n\s+|\n/g,"");return e.data.innerHTML=["<article onclick>",n,"</article>"].join(""),s.length?void nv.functions.get(s[0].getAttribute("data-injected"),r,s.shift()):t[6]()},s.shift())}}return t[4]()},function(){return nv.functions.scanUI(nv.selectors.ui,function(e){if(1==e.nodeType){var n=e.id.toLowerCase()||e.className.toLowerCase()||e.tagName.toLowerCase();if(void 0==nv.selectors[n])nv.selectors[n]=e;else if(nv.selectors[n]===e);else{var t=1;!function s(t){return void 0!=nv.selectors[n.concat(++t)]?s(t):void(nv.selectors[n.concat(t)]=e)}(t)}}}),nv.selectors.navigation&&(nv.functions.buildUI(),nv.numbers.navOriginalLength=nv.selectors.navigation.children.length),t[5]()},function(){if(!nv.booleans.respawn){-1==window.location.href.indexOf("beta")&&-1==window.location.href.indexOf("localhost:")?nv.functions.get("//api.inventum.digital/intel.min.js"):nv.booleans.dev=!0;var e=function(){window.setTimeout(function(){window.requestAnimationFrame(t)},500)};window.addEventListener("blur",function(){t=e}),window.addEventListener("focus",function(){nv.spreads.each(function(e){e.addClass("Active")}),t=n}),window.addEventListener("beforeunload",function(){t=e});var n=function(){if(nv.spreads.measure(),nv.selectors.navigation){for(var e=nv.numbers.navOriginalLength;e--;){var n=nv.selectors.navigation.children[e].children[0];nv.spreads.active.el.id==n.innerHTML?n.className="Active":n.className=""}nv.spreads.hero().el.id!=nv.spreads.active.el.id?nv.selectors.navigation.setAttribute("data-viewing",nv.spreads.active.el.id):nv.selectors.navigation.setAttribute("data-viewing","Navigation")}nv.selectors.video&&(nv.spreads.hero()==nv.spreads.active?(nv.selectors.video.play(),nv.selectors.video.setAttribute("data-viewing",!0)):(nv.selectors.video.pause(),nv.selectors.video.setAttribute("data-viewing",!1))),window.setTimeout(function(){window.requestAnimationFrame(t)},1e3/30)},t=n;nv.spreads.measure&&t()}return nv},function(e){var n=document.createElement("SCRIPT");if(nv.spreads.scripts.codes.length)for(var t=nv.spreads.scripts.codes.length;t--;){var s=n.cloneNode(!1);s.textContent=nv.spreads.scripts.codes[t],document.body.appendChild(s)}if(nv.spreads.scripts.urls.length)for(var t=nv.spreads.scripts.urls.length;t--;){var s=n.cloneNode(!1);s.src=nv.spreads.scripts.urls[t],document.body.appendChild(s)}return window.location.hash.length&&(window.location=window.location),nv.functions.callback?nv.functions.callback():nv}];return window.nv=nv,t[0](e,n)}